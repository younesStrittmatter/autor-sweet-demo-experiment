var jsPsychRok=function(t){"use strict";const e={name:"rok",parameters:{choices:{type:t.ParameterType.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},correct_choice:{type:t.ParameterType.KEYS,pretty_name:"Correct choice",default:void 0},trial_duration:{type:t.ParameterType.INT,pretty_name:"Trial duration",default:0},response_ends_trial:{type:t.ParameterType.BOOL,pretty_name:"Response ends trial",default:!0},number_of_oobs:{type:t.ParameterType.INT,pretty_name:"Number of oriented objectes",default:300},coherent_movement_direction:{type:t.ParameterType.INT,pretty_name:"Coherent movement direction",default:0},coherent_orientation:{type:t.ParameterType.INT,pretty_name:"Coherent object orientation",default:0},coherence_movement:{type:t.ParameterType.INT,pretty_name:"Movement coherence",default:50},coherence_orientation:{type:t.ParameterType.INT,pretty_name:"Orientation coherence",default:50},coherence_movement_opposite:{type:t.ParameterType.INT,pretty_name:"Opposite movement coherence",default:0},coherence_orientation_opposite:{type:t.ParameterType.INT,pretty_name:"Opposite orientation coherence",default:0},movement_speed:{type:t.ParameterType.INT,pretty_name:"Movement Speed",default:10},movement_speed_randomisation:{type:t.ParameterType.INT,pretty_name:"Movement speed randomisation",default:0},oob_size:{type:t.ParameterType.INT,pretty_name:"Object size",default:2},aperture_width:{type:t.ParameterType.INT,pretty_name:"Aperture width",default:600},aperture_height:{type:t.ParameterType.INT,pretty_name:"Aperture height",default:400},oob_color:{type:t.ParameterType.STRING,pretty_name:"Dot color",default:"white"},background_color:{type:t.ParameterType.STRING,pretty_name:"Background color",default:"gray"},border:{type:t.ParameterType.BOOL,pretty_name:"Border",default:!1},border_thickness:{type:t.ParameterType.INT,pretty_name:"Border width",default:1},border_color:{type:t.ParameterType.STRING,pretty_name:"Border Color",default:1},stimulus_type:{type:t.ParameterType.INT,pretty_name:"Stimulus type",default:0},aperture_shape:{type:t.ParameterType.INT,pretty_name:"aperture shape",default:0},aperture_background_color:{type:t.ParameterType.STRING,pretty_name:"Background of aperture",default:"#0000"},random_movement_type:{type:t.ParameterType.INT,pretty_name:"Random movement type",default:0},random_orientation_type:{type:t.ParameterType.INT,pretty_name:"Random orientation type",default:0},number_of_apertures:{type:t.ParameterType.INT,pretty_name:"Number of apertures",default:1},density_unit_area:{type:t.ParameterType.INT,pretty_name:"Density area",default:null},aperture_position_left:{type:t.ParameterType.INT,pretty_name:"Horizontal position of aperature",default:50},aperture_position_top:{type:t.ParameterType.INT,pretty_name:"Vertical position of aperature",default:50},prompt:{type:t.ParameterType.STRING,pretty_name:"Prompt",default:null},fade_out:{type:t.ParameterType.INT,pretty_name:"Fade out on edges",default:0},stimulus_image:{type:t.ParameterType.IMAGE,pretty_name:"Stimuli pictures",default:null},background_image:{type:t.ParameterType.IMAGE,pretty_name:"Background image",default:null},stimulus_image_keyframes:{type:t.ParameterType.INT,pretty_name:"Keyframes of stimulus pictures",default:1},background_image_keyframes:{type:t.ParameterType.INT,pretty_name:"Keframse of background pictures",default:1},stimulus_keyframe_time:{type:t.ParameterType.FLOAT,pretty_name:"Keyframe time",default:.1},stimulus_mirror:{type:t.ParameterType.INT,pretty_name:"Mirror image time",default:0},experiment_congruency_mode:{type:t.ParameterType.INT,pretty_name:"Experiment congruency mode",default:0},experiment_main_task:{type:t.ParameterType.INT,pretty_name:"Main task when experiment is set to congruency mode (0- movement, 1-orientation)",default:0},units:{type:t.ParameterType.STRING,pretty_name:"Units in which size and speed of oobs is expressed",default:null},aperture_draw_mode:{type:t.ParameterType.STRING,pretty_name:"When in overlay draws stimuli of different apertures on top of each other. When in intermixed oobs all show up in one aperture intermixed",default:"overlay"}}};class i{constructor(t){this.jsPsych=t}trial(t,e){var i=gt(e.choices,[]),a=gt(e.correct_choice,void 0),o=gt(e.trial_duration,0),n=gt(e.response_ends_trial,!0),h=gt(e.number_of_oobs,300),f=gt(e.coherent_movement_direction,0),_=gt(e.coherent_orientation,0),g=gt(e.coherence_movement,50),T=gt(e.coherence_orientation,50),x=gt(e.coherence_movement_opposite,50),v=gt(e.coherence_orientation_opposite,50),M=gt(e.movement_speed,10),P=gt(e.movement_speed_randomisation,0),b=gt(e.oob_size,2),w=gt(e.aperture_width,600),k=gt(e.aperture_height,400),I=gt(e.oob_color,"white"),z=gt(e.background_color,"gray"),N=gt(e.aperture_background_color,"#0000");gt(e.border,!1),gt(e.border_thickness,1),gt(e.border_color,"white");var A=gt(e.stimulus_type,0),O=gt(e.aperture_shape,0),R=gt(e.random_movement_type,0),S=gt(e.random_orientation_type,0),C=gt(e.number_of_apertures,1),F=gt(e.density_unit_area,null),E=gt(e.aperture_position_left,50),K=gt(e.aperture_position_top,50),W=gt(e.prompt,null),j=gt(e.fade_out,0),B=gt(e.stimulus_image,null),L=gt(e.background_image,null),H=gt(e.stimulus_image_keyframes,1);gt(e.background_image_keyframes,1);var G=gt(e.stimulus_keyframe_time,.1),D=gt(e.stimulus_mirror,0),q=gt(e.experiment_congruency_mode,0),V=gt(e.experiment_main_task,0),Y=gt(e.units,null),U=gt(e.aperture_draw_mode,"overlay");let J=C,Q=J;"overlay"!==U&&(J=1);var X=[],Z=[];if(J>1)for(let t=0;t<J;t++)Z.push(document.createElement("div")),X.push(document.createElement("canvas"));else Z.push(document.createElement("div")),X.push(document.createElement("canvas"));for(let e=0;e<J;e++){if(null!=s(L,e)&&(Z[e].style.backgroundImage="url("+s(L,e)+")",Z[e].style.backgroundRepeat="no-repeat",Z[e].style.backgroundSize="cover"),t.appendChild(Z[e]),Z[e].appendChild(X[e]),Array.isArray(W)){let t=document.createElement("div");t.style.margin="0",t.style.padding="0",Z[e].appendChild(t),t.style.textAlign="center",t.innerHTML=W[e],t.style.position="absolute",t.style.transform="translate(-50%, 100%)",t.style.textAlign="center",t.style.top=10+s(k,0)/2+"px",t.style.width=s(w,0)+"px"}}if(null!=W&&!Array.isArray(W)){let t=document.createElement("div");t.style.margin="0",t.style.padding="0",Z[0].appendChild(t),t.style.textAlign="center",t.innerHTML=W,t.style.position="absolute",t.style.transform="translate(-50%, 100%)",t.style.textAlign="center",t.style.top=10+s(k,0)/2+"px",t.style.width=s(w,0)+"px"}let $=document.getElementsByClassName("jspsych-display-element")[0],tt=$.style.margin,et=$.style.padding,it=$.style.backgroundColor;$.style.margin="0",$.style.padding="0";for(let t=0;t<J;t++)Z[t].style.margin="0px",Z[t].style.margin="0px",X[t].style.margin="0px",X[t].style.padding="0px",X[t].style.position="absolute",X[t].style.transform="translate(-50%, -50%)";$.style.backgroundColor=z;let st=[];for(let t=0;t<J;t++)st.push(X[t].getContext("2d"));const rt=$.getBoundingClientRect();for(let t=0;t<J;t++)if(X[t].width=s(w,t),X[t].height=s(k,t),X[t].style.backgroundColor=s(N,t),Z[t].style.position="absolute",Array.isArray(E)&&Array.isArray(K)){let e=Math.round(K[t]*rt.height/100);Z[t].style.top=e.toString()+"px",Z[t].style.left=E[t].toString()+"%"}else if(J>1){let e;e=J%2==0?t*(100/J)+100/(2*J):t*(100/(J+1))+100/(2*(J-1));let i=Math.round(K*rt.height/100);Z[t].style.top=i.toString()+"px",Z[t].style.left=e.toString()+"%"}else{let e=Math.round(K*rt.height/100);Z[t].style.top=e.toString()+"px",Z[t].style.left=E.toString()+"%"}let at,ot,nt=!1,ht=!1,lt={rt:-1,key:""};var mt=[];let pt=0,yt=[];if(null!=B){let t=B;if(Array.isArray(t))for(let e=0;e<t.length;e++){let i=t[e];if(Array.isArray(i)){let t=[];for(let s=0;s<i[e].length;s++){let e=document.createElement("img");e.src=i[s],t.push(e)}yt.push(t)}else{let t=document.createElement("img");t.src=i,yt.push(t)}}else{let e=document.createElement("img");e.src=t,yt.push(e)}}let ct=[];for(let t=0;t<Q;t++){let e=s(h,t);if(null!=F){e=e*(s(w,t)*s(k,t))/F}let i=s(g,t),a=s(x,t),o=s(T,t),n=s(v,t),z=s(q,t),N=s(V,t),C=[],E=[];if(0===z){let[t,s,r]=l(i,a,e),[h,p,y]=l(o,n,e);for(let e=0;e<t;e++)E.push(1);for(let t=0;t<s;t++)E.push(-1);for(let t=0;t<r;t++)E.push(0);for(let t=0;t<h;t++)C.push(1);for(let t=0;t<p;t++)C.push(-1);for(let t=0;t<y;t++)C.push(0);C=m(C),E=m(E)}else if(0===N){let[t,s,r]=l(i,a,e),h=Math.floor(o/100*t),m=Math.floor(n/100*t);o+n===100&&(m=t-h);for(let e=0;e<t;e++)E.push(1);for(let t=0;t<s;t++)E.push(-1);for(let t=0;t<r;t++)E.push(0);for(let t=0;t<h;t++)C.push(1);for(let t=0;t<m;t++)C.push(-1);for(let t=0;t<e-(h+m);t++)C.push(0)}else if(1===N){let[t,s,r]=l(o,n,e),h=Math.floor(i/100*t),m=Math.floor(a/100*t);i+a===100&&(m=t-h);for(let e=0;e<t;e++)C.push(1);for(let t=0;t<s;t++)C.push(-1);for(let t=0;t<r;t++)C.push(0);for(let t=0;t<h;t++)E.push(1);for(let t=0;t<m;t++)E.push(-1);if(1===z)for(let t=0;t<e-(h+m);t++)E.push(0);else for(let t=0;t<e-(h+m);t++)C.push(C[t+h+m])}let K=s(I,t),W=s(A,t);3===W&&(K=r(K));let B=s(O,t),L=s(M,t),J=s(P,t),Z=s(b,t),$=s(j,t);for(let i=0;i<e;i++){let e=0,r=0,a=s(_,t);-1===C[i]?a+=180:0===C[i]&&(a=Math.floor(360*Math.random()),r=s(S,t));let o,n=s(f,t);-1===E[i]?n+=180:0===E[i]&&(n=Math.floor(360*Math.random()),e=s(R,t)),2===z&&0===N&&0===C[i]&&1!=E[i]?a=n:2===z&&1===N&&0===E[i]&&1!=C[i]&&(n=a);let h=st[t],l=X[t];if("overlay"!==U&&(h=st[0],l=X[0]),0===W)o=new p(Z,K,a,n,L,J,B,e,r,$,l,h,Y);else if(1===W)o=new c(Z,K,a,n,L,J,B,e,r,$,l,h,Y);else if(2===W)o=new u(Z,K,a,n,L,J,B,e,r,$,l,h,Y);else if(3===W)o=new y(Z,K,a,n,L,J,B,e,r,$,l,h,Y);else if(4===W){let i,m,p,y;1===Q?(i=yt,m=H,p=G,y=D):(i=s(yt,t),m=s(H,t),p=s(G,t),y=s(D,t)),o=new d(Z,K,a,n,L,J,B,e,r,$,i,m,p,y,l,h,Y)}ct.push(o)}}ct=m(ct);const ut=()=>{"NO_KEYS"!=i&&(ot=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:ft,valid_responses:i,rt_method:"performance",persist:!1,allow_held_key:!1}))},dt=()=>{nt=!0,pt=mt.length;let e=mt;mt=pt>0?mt.reduce(((t,e)=>t+e))/pt:0,void 0!==ot&&this.jsPsych.pluginAPI.cancelKeyboardResponse(ot);let s={rt:lt.rt,key_press:lt.key,correct:_t(),choices:i,correct_choice:a,trial_duration:o,response_ends_trial:n,number_of_oobs:h,coherent_movement_direction:f,coherence_movement:g,opposite_coherence_movement:x,coherent_orientation:_,coherence_orientation:T,opposite_coherence_orientation:v,movement_speed:M,oob_size:b,oob_color:I,movement_speed_randomisation:P,aperture_width:w,aperture_height:k,background_color:z,aperture_background_color:N,frame_rate:mt,frame_rate_array:e,number_of_frames:pt,stimulus_type:A,aperture_shape:O,random_movemet_type:R,random_orientation_type:S,number_of_apertures:C,density_unit_area:F,prompt:W,aperture_position_left:E,aperture_position_top:K,aperture_mode:U};t.innerHTML="",$.style.margin=tt,$.style.padding=et,$.style.backgroundColor=it,this.jsPsych.finishTrial(s)};function ft(t){""==lt.key&&(lt=t),n&&(window.clearTimeout(at),dt())}!function(){let t,e=0,i=window.requestAnimationFrame((function s(){if(nt)window.cancelAnimationFrame(i);else if(i=window.requestAnimationFrame(s),!ht&&o>0&&(at=window.setTimeout(dt,o),ht=!0),function(t){for(let e=0;e<ct.length;e++)ct[e].update(t)}(e),function(){for(let t=0;t<X.length;t++)st[t].clearRect(0,0,X[t].width,X[t].height);for(let t=0;t<ct.length;t++)ct[t].draw()}(),void 0===t)t=performance.now();else{let i=performance.now();document.hasFocus()?e=i-t:t=performance.now(),mt.push(Math.round(i-t)),t=i}}));ut()}();const _t=()=>void 0!==a&&a.constructor===Array?"string"==typeof a[0]||a[0]instanceof String?a.every((t=>this.jsPsych.pluginAPI.compareKeys(t,lt.key))):(a[0],console.error("Error in ROK plugin: elements in the correct_choice array must be key characters (strings)."),!1):(console.error("Error in ROK plugin: you must specify an array of key characters for the correct_choice parameter."),!1);function gt(t,e){return void 0!==t?t:e}}}function s(t,e){return Array.isArray(t)?t[e]:t}function r(t){let e=document.createElement("canvas");e.height=1,e.width=1;let i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,1,1),i.getImageData(0,0,1,1).data}function a(t,e){let i=[0,0,0,255];for(let s=0;s<3;s++){let r=t[s]+e;r=r>255?255:r,r=r<0?0:r,i[s]=r}return i}function o(t){let e;return e=[0,1,2].map((function(e){return("0"+t[e].toString(16)).slice(-2)})).join(""),"#"+e}function n(t){let e=t*Math.PI/180;return Math.cos(e)}function h(t){let e=t*Math.PI/180;return-Math.sin(e)}function l(t,e,i){let s,r=Math.round(t/100*i);s=t+e==100?i-r:Math.round(e/100*i);let a=i-r-s;return r+s>100&&50==t&&(r=100-s),[r,s,a]}function m(t){let e=t.length;for(;0!==e;){let i=Math.floor(Math.random()*e);e-=1;let s=t[e];t[e]=t[i],t[i]=s}return t}i.info=e;class p{constructor(t,e,i,s,r,a,o,n,h,l,m,p,y){if(this.canvas=m,this.size=m.width*t/100,"px"===y&&(this.size=t),this.color=e,this.ctx=p,this.pos={x:0,y:0},this.vel={x:0,y:0},0==o&&(this.pos.x=Math.random()*m.width,this.pos.y=Math.random()*m.height),1==o){let t=2*Math.random()*Math.PI,e=Math.sqrt(Math.sqrt(Math.random()))-.5;this.pos.x=e*Math.sin(t)*m.width+m.width/2,this.pos.y=e*Math.cos(t)*m.height+m.height/2}this.speedRes=m.width*r/100*(a/100*Math.random()-a/100+1),"px"===y&&(this.speedRes=r*(a/100*Math.random()-a/100+1)),this.orientation=i,this.movementDirection=s,this.setVel(),this.ld={x:0,y:0},this.lu={x:0,y:0},this.r={x:0,y:0},this.setOrient(),this.isRandomWalk=n,this.rW=10*(Math.random()-.5),this.isRandomOrientated=h,this.rO=10*(Math.random()-.5),this.apertureType=o,this.timeToChangeMovement=Math.random(),this.timeToChangeOrientation=Math.random(),this.isFade=l,this.alpha=1}setVel(){this.vel.x=n(this.movementDirection)*this.speedRes,this.vel.y=h(this.movementDirection)*this.speedRes}setOrient(){this.ld.x=n(this.orientation+270)*this.size,this.ld.y=h(this.orientation+270)*this.size,this.lu.x=n(this.orientation+90)*this.size,this.lu.y=h(this.orientation+90)*this.size,this.r.x=n(this.orientation)*this.size,this.r.y=h(this.orientation)*this.size}randomMovement(t){this.movementDirection+=this.rW*t/1e3,this.setVel(),this.timeToChangeMovement+=t/1e3;let e=1-this.timeToChangeMovement;e<0&&(this.rW=30*(Math.random()-.5),this.timeToChangeMovement=-e)}randomOrientation(t){this.orientation+=this.rO*t/1e3,this.orientation<0?this.orientation=360-this.orientation:this.orientation>360&&(this.orientation=this.orientation-360),this.setOrient(),this.timeToChangeOrientation+=t/1e3;let e=1-this.timeToChangeOrientation;e<0&&(this.rO=60*(Math.random()-.5),this.setOrient(),this.timeToChangeOrientation=-e)}handleOutOfBounds(){if(0==this.apertureType){this.alpha=.1,this.pos.x<-this.size?this.pos.x=this.canvas.width+this.size:this.pos.x>this.canvas.width+this.size&&(this.pos.x=-this.size),this.pos.y<-this.size?this.pos.y=this.canvas.height+this.size:this.pos.y>this.canvas.height+this.size&&(this.pos.y=-this.size);let t=Math.min(this.pos.x-this.size,this.pos.y-this.size,this.canvas.width-(this.pos.x+this.size),this.canvas.height-(this.pos.y+this.size));t<this.canvas.width/20&&this.isFade?(this.alpha=t/(this.canvas.width/20),this.alpha<0&&(this.alpha=0)):this.alpha=1}if(1==this.apertureType){this.alpha=.1;let t=this.canvas.width/2,e=this.canvas.height/2,i=this.pos.x-t,s=this.pos.y-e,r=i*i/(t*t)+s*s/(e*e);r>.7&&this.isFade?(this.alpha=(1-r)/.3,this.alpha<0&&(this.alpha=0)):this.alpha=1,r>1&&(i*=-.99,s*=-.99,this.pos.x=i+t,this.pos.y=s+e)}}update(t){this.pos.x+=this.vel.x*t/1e3,this.pos.y+=this.vel.y*t/1e3,this.isRandomWalk&&this.randomMovement(t),this.isRandomOrientated&&this.randomOrientation(t),this.handleOutOfBounds()}draw(){this.ctx.globalAlpha=this.alpha,this.ctx.beginPath();let t=this.pos.x+this.ld.x,e=this.pos.y+this.ld.y;this.ctx.moveTo(t,e),t=this.pos.x+this.lu.x,e=this.pos.y+this.lu.y,this.ctx.lineTo(t,e),t=this.pos.x+this.r.x,e=this.pos.y+this.r.y,this.ctx.lineTo(t,e),this.ctx.fillStyle=this.color,this.ctx.fill()}}class y extends p{constructor(t,e,i,s,r,a,o,n,h,l,m,p,y){super(t,e,i,s,r,a,o,n,h,l,m,p,y),this.animationTime=Math.random(),this.animationFrame=4,this.animationTime<.8&&(this.animationFrame=3),this.animationTime<.6&&(this.animationFrame=2),this.animationTime<.4&&(this.animationFrame=1),this.animationTime<.2&&(this.animationFrame=0),this.animationTime*=.1,this.animdir=1;let c=e;this.makeColors(c,i)}makeColors(t,e){this.colorsLeft=[],this.colorsRight=[];let i=Math.round(5*-h(e)),s=Math.round(5*n(e)),r=a(t,i),l=a(t,s);this.colorsRight.push(o(r)),this.colorsLeft.push(o(l));for(let t=0;t<6;t++)r=a(r,i),l=a(l,s),this.colorsRight.push(o(r)),this.colorsLeft.push(o(l))}update(t){super.update(t),this.animationTime+=t/1e3;let e=.1-this.animationTime;e<0&&(this.animationFrame+=this.animdir,this.animationTime=-e,(this.animationFrame>5||this.animationFrame<1)&&(this.animationTime-=.1,this.animdir*=-1))}draw(){this.ctx.globalAlpha=this.alpha;let t=this.pos.x+.2*this.r.x,e=this.pos.y+.2*this.r.y;this.ctx.beginPath(),this.ctx.moveTo(t,e);let i=this.pos.x+this.ld.x/(.1*this.animationFrame+1),s=this.pos.y+this.ld.y/(.1*this.animationFrame+1);this.ctx.lineTo(i,s),i=this.pos.x+this.r.x,s=this.pos.y+this.r.y,this.ctx.lineTo(i,s),this.ctx.fillStyle=this.colorsRight[this.animationFrame],this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(t,e),i=this.pos.x+this.lu.x/(.1*this.animationFrame+1),s=this.pos.y+this.lu.y/(.1*this.animationFrame+1),this.ctx.lineTo(i,s),i=this.pos.x+this.r.x,s=this.pos.y+this.r.y,this.ctx.lineTo(i,s),this.ctx.fillStyle=this.colorsLeft[this.animationFrame],this.ctx.fill()}}class c extends p{draw(){this.ctx.globalAlpha=this.alpha,this.ctx.beginPath(),this.ctx.arc(this.pos.x,this.pos.y,this.size/2,0,2*Math.PI),this.ctx.fillStyle=this.color,this.ctx.fill()}}class u extends p{draw(){this.ctx.globalAlpha=this.alpha,this.ctx.beginPath();let t=this.pos.x-this.size/2,e=this.pos.y-this.size/2;this.ctx.moveTo(t,e),t=this.pos.x+this.size/2,e=this.pos.y-this.size/2,this.ctx.lineTo(t,e),t=this.pos.x+this.size/2,e=this.pos.y+this.size/2,this.ctx.lineTo(t,e),t=this.pos.x-this.size/2,e=this.pos.y+this.size/2,this.ctx.lineTo(t,e),this.ctx.fillStyle=this.color,this.ctx.fill()}}class d extends p{constructor(t,e,i,r,a,o,n,h,l,m,p,y,c,u,d,f,_){if(super(t,e,i,r,a,o,n,h,l,m,d,f,_),Array.isArray(p)){let t=Math.floor(Math.random()*p.length);this.img=p[t],this.keyframes=s(y,t),this.keyframeTime=s(c,t),this.mirrorType=s(u,t)}else this.img=p,this.keyframes=y,this.keyframeTime=c,this.mirrorType=u;this.imgWidth=this.img.naturalWidth/this.keyframes,this.imgHeight=this.img.naturalHeight,this.actualKeyframe=Math.floor(Math.random()*this.keyframes),this.animationTime=Math.random()*this.keyframeTime}update(t){super.update(t),this.animationTime+=t/1e3,this.keyframeTime-this.animationTime<0&&(this.animationTime=0,this.actualKeyframe++,this.actualKeyframe>=this.keyframes&&(this.actualKeyframe=0))}draw(){this.ctx.globalAlpha=this.alpha,this.ctx.translate(this.pos.x,this.pos.y),0===this.mirrorType?this.ctx.rotate(-Math.PI*this.orientation/180):1==this.mirrorType&&(this.orientation>90&&this.orientation<270?this.ctx.rotate(-Math.PI*(this.orientation-180)/180):this.ctx.rotate(-Math.PI*this.orientation/180)),this.ctx.translate(-this.pos.x,-this.pos.y),0===this.mirrorType?this.ctx.drawImage(this.img,this.actualKeyframe*this.imgWidth,0,this.imgWidth,this.imgHeight,this.pos.x-this.size/2,this.pos.y-this.size/2,this.size,this.size):1===this.mirrorType&&(this.orientation>90&&this.orientation<270?this.ctx.drawImage(this.img,this.actualKeyframe*this.imgWidth,this.imgHeight/2,this.imgWidth,this.imgHeight/2,this.pos.x-this.size/2,this.pos.y-this.size/2,this.size,this.size):this.ctx.drawImage(this.img,this.actualKeyframe*this.imgWidth,0,this.imgWidth,this.imgHeight/2,this.pos.x-this.size/2,this.pos.y-this.size/2,this.size,this.size)),this.ctx.translate(this.pos.x,this.pos.y),0===this.mirrorType?this.ctx.rotate(Math.PI*this.orientation/180):1===this.mirrorType&&(this.orientation>90&&this.orientation<270?this.ctx.rotate(Math.PI*(this.orientation-180)/180):this.ctx.rotate(Math.PI*this.orientation/180)),this.ctx.translate(-this.pos.x,-this.pos.y)}}return i}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
